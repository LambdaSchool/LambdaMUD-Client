{"ast":null,"code":"import _defineProperty from \"/Users/Huff/Desktop/LambdaMUD-Client/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/Huff/Desktop/LambdaMUD-Client/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/Huff/Desktop/LambdaMUD-Client/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/Huff/Desktop/LambdaMUD-Client/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/Huff/Desktop/LambdaMUD-Client/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/Huff/Desktop/LambdaMUD-Client/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/Huff/Desktop/LambdaMUD-Client/client/src/components/game/Game.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport \"./game.css\";\nimport Pusher from \"pusher-js\";\nimport { Link } from \"react-router-dom\"; // Room handles the \"game\" portion of the app. it holds the players whereabouts and allows for movement and \"say\" functionality\n\nvar Game =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Game, _Component);\n\n  function Game() {\n    var _this;\n\n    _classCallCheck(this, Game);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Game).call(this));\n\n    _this.handleInput = function (event) {\n      _this.setState(_defineProperty({}, event.target.id, event.target.value));\n    };\n\n    _this.init = function () {\n      var header = {\n        Authorization: \"Token \".concat(_this.state.key)\n      };\n      axios.get(\"https://mudlambdahuthman.herokuapp.com/api/adv/init/\", {\n        headers: header\n      }).then(function (response) {\n        _this.setState({\n          room: response.data\n        });\n\n        _this.setState({\n          uuid: response.data.uuid\n        });\n\n        _this.pusher();\n      }).catch(function (error) {\n        console.log(error.response);\n      });\n    };\n\n    _this.pusher = function () {\n      var pusher = new Pusher(\"1b4118407e6882f44d92\", {\n        cluster: \"us2\"\n      });\n      var channel = pusher.subscribe(\"p-channel-\".concat(_this.state.uuid));\n      channel.bind(\"broadcast\", function (data) {\n        alert(data.message);\n      });\n      Pusher.logToConsole = true;\n    };\n\n    _this.move = function (direction) {\n      var header = {\n        Authorization: \"Token \".concat(_this.state.key),\n        \"Content-Type\": \"application/json\"\n      };\n      axios.post(\"https://mudlambdahuthman.herokuapp.com/api/adv/move/\", {\n        direction: direction\n      }, {\n        headers: header\n      }).then(function (response) {\n        _this.setState({\n          room: response.data\n        });\n      }).catch(function (error) {\n        alert(error.response.data.error);\n      });\n    };\n\n    _this.state = {\n      room: null,\n      key: localStorage.getItem(\"key\"),\n      msg: \"\",\n      err: \"\",\n      uuid: null,\n      chat: []\n    };\n    return _this;\n  }\n  /* upon first load initialize the players room */\n\n\n  _createClass(Game, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (localStorage.getItem(\"key\")) {\n        this.init();\n      }\n    }\n    /* simple input handler */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, this.state.room ? React.createElement(\"div\", {\n        className: \"game\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"Location\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, \"Location:\", React.createElement(\"i\", {\n        className: \"fas fa-gamepad\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      })), React.createElement(Link, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        onClick: function onClick() {\n          return localStorage.clear();\n        },\n        className: \"logout\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, \"Logout\")), React.createElement(\"p\", {\n        className: \"player\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, \"In this room: \", this.state.room.name, this.state.room.players.map(function (p) {\n        return \", \".concat(p);\n      })), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, this.state.room.title), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, this.state.room.description), React.createElement(\"div\", {\n        className: \"directions\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"dir-btn\",\n        onClick: function onClick() {\n          return _this2.move(\"n\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, \"North\"), React.createElement(\"div\", {\n        className: \"dir-btn\",\n        onClick: function onClick() {\n          return _this2.move(\"e\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, \"East\"), React.createElement(\"div\", {\n        className: \"dir-btn\",\n        onClick: function onClick() {\n          return _this2.move(\"s\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, \"South\"), React.createElement(\"div\", {\n        className: \"dir-btn\",\n        onClick: function onClick() {\n          return _this2.move(\"w\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, \"West\"))) : localStorage.getItem(\"key\") ? React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, \"loading...\") : React.createElement(Link, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"homepage-login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"login-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, \"LOGIN OR REGISTER\"))));\n    }\n  }]);\n\n  return Game;\n}(Component);\n\nexport default Game;","map":{"version":3,"sources":["/Users/Huff/Desktop/LambdaMUD-Client/client/src/components/game/Game.js"],"names":["React","Component","axios","Pusher","Link","Game","handleInput","event","setState","target","id","value","init","header","Authorization","state","key","get","headers","then","response","room","data","uuid","pusher","catch","error","console","log","cluster","channel","subscribe","bind","alert","message","logToConsole","move","direction","post","localStorage","getItem","msg","err","chat","clear","name","players","map","p","title","description"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport \"./game.css\";\nimport Pusher from \"pusher-js\";\nimport {Link } from \"react-router-dom\";\n // Room handles the \"game\" portion of the app. it holds the players whereabouts and allows for movement and \"say\" functionality\n class Game extends Component {\n  constructor() {\n    super();\n    this.state = {\n      room: null,\n      key: localStorage.getItem(\"key\"),\n      msg: \"\",\n      err: \"\",\n      uuid: null,\n      chat: []\n    };\n  }\n   /* upon first load initialize the players room */\n  componentDidMount() {\n    if (localStorage.getItem(\"key\")) {\n      this.init();\n    }\n  }\n   /* simple input handler */\n  handleInput = event => {\n    this.setState({\n      [event.target.id]: event.target.value\n    });\n  };\n   /* game initializer: sends a get request and saves the player's \n     room/details to state, specifically saves uuid to state.\n     calls pusher to initialize that as well */\n  init = () => {\n    const header = {\n      Authorization: `Token ${this.state.key}`\n    };\n    axios\n      .get(\"https://mudlambdahuthman.herokuapp.com/api/adv/init/\", { headers: header })\n      .then(response => {\n        this.setState({ room: response.data });\n        this.setState({ uuid: response.data.uuid });\n        this.pusher();\n      })\n      .catch(error => {\n        console.log(error.response);\n      });\n  };\n   /* establishes connection to pusher using the players uuid stored on state */\n  pusher = () => {\n    const pusher = new Pusher(\"1b4118407e6882f44d92\", {\n      cluster: \"us2\"\n    });\n    const channel = pusher.subscribe(`p-channel-${this.state.uuid}`);\n    channel.bind(\"broadcast\", function(data) {\n      alert(data.message);\n      \n    });\n    Pusher.logToConsole = true;\n  };\n   /* sends a post request that includes a direction, refreshes state\n     with the new room information */\n  move = direction => {\n    const header = {\n      Authorization: `Token ${this.state.key}`,\n      \"Content-Type\": \"application/json\"\n    };\n    axios\n      .post(\n        \"https://mudlambdahuthman.herokuapp.com/api/adv/move/\",\n        { direction: direction },\n        { headers: header }\n      )\n      .then(response => {\n        this.setState({ room: response.data });\n      })\n      .catch(error => {\n        alert(error.response.data.error);\n      });\n  };\n   render() {\n    return (\n      <div>\n        {this.state.room ? (\n          <div className=\"game\">\n          <div className=\"Location\">Location:\n        <i className=\"fas fa-gamepad\" />\n        </div>\n        <Link to=\"/\">\n          <div onClick={() => localStorage.clear()} className=\"logout\">\n            Logout\n          </div>\n        </Link>\n            <p className=\"player\">\n              In this room: {this.state.room.name}\n              {this.state.room.players.map(p => `, ${p}`)}\n            </p>\n            <p>{this.state.room.title}</p>\n            <p>{this.state.room.description}</p>\n            <div className=\"directions\">\n          <div className=\"dir-btn\" onClick={() => this.move(\"n\")}>\n            North\n          </div>\n          <div className=\"dir-btn\" onClick={() => this.move(\"e\")}>\n            East\n          </div>\n          <div className=\"dir-btn\" onClick={() => this.move(\"s\")}>\n            South\n          </div>\n          <div className=\"dir-btn\" onClick={() => this.move(\"w\")}>\n            West\n          </div>\n        </div>\n        </div>\n        ) : localStorage.getItem(\"key\") ? (\n          <p>loading...</p>\n        ) : (\n        <Link to = \"/\">\n          <p className= \"homepage-login\">\n          <p className= \"login-text\">LOGIN OR REGISTER</p>\n        </p>\n        </Link> )}\n       \n      </div>\n    );\n  }\n}\nexport default Game;"]},"metadata":{},"sourceType":"module"}